*=================================================================================* Section 0: Directories and Setup*=================================================================================vers 10.1 clear allset more offglobal directory /Users/pedm/Documents/jobs/Damian-Clarke/Data/*======================================================================================* Section 1a: Obtain mother BMI + height (from derived variables)*=====================================================================================use "${directory}Raw/MCS-Survey-1/stata9/mcs1_derived_variables.dta", clearrename ADMBMI00 mother_BMI_wave1rename ADMBMB00 mother_BMI_before_birthrename ADMHGT00 mother_height_wave1replace mother_height_wave1 = . if mother_height_wave1 < 0replace mother_BMI_wave1 = . if mother_BMI_wave1 < 0replace mother_BMI_before_birth = . if mother_BMI_before_birth < 0* Derive mother's work statusrename AMDWRK00 workstatus1rename APDWRK00 partner_workrename AMDRES00 main_identityrename APDRES00 partner_identityreplace workstatus1 = . if main_identity != 1 & main_identity != 3replace workstatus1 = partner_work if partner_identity == 1 | partner_identity == 3 | partner_identity == 11lab var workstatus1 "S1 Mother is in work or not"keep MCSID mother_BMI_wave1 mother_height_wave1 mother_BMI_before_birth workstatus1sort MCSIDsave "${directory}Intermediate/mcs1_derived_variables.dta", replace*======================================================================================* Section 1b: Obtain mother education + age at birth + BMI (from derived variables)*=====================================================================================/* Originally, mother_bmi was the control variable with the most missing observations.Here we combine Wave 1 and Wave 2 to reduce the incidence of missing data.We use Wave 2 because not all CMs are included in Wave 1. Similarly, manymothers who gave their bmi in Wave 1 are not asked this question again.*/use "${directory}Raw/MCS-Survey-2/stata9_se/mcs2_derived_variables.dta", clearrename BDMBMI00 mother_BMI_wave2rename BDMHGT00 mother_height_wave2replace mother_BMI_wave2 = . if mother_BMI_wave2 < 0replace mother_height_wave2 = . if mother_height_wave2 < 0rename BDNOBA00 Number_CMs_in_HH rename BDCTRY00 countryreplace country = . if country < 0rename BPDAGI00 partner_age* Natural mother education level: may be recorded under either main or partner* BMDNVQ00 S2 MAIN DV Respondent NVQ Highest Level (across MCS1 and MCS2)* BPDNVQ00 S2 PARTNER DV Respondent NVQ Highest Level (across MCS1 and MCS2)rename BMDREL00 main_relationship_CMrename BPDREL00 partner_relationship_CMreplace BMDNVQ00 = . if main_relationship_CM != 1rename BMDNVQ00 natural_mother_education_NVQreplace natural_mother_education_NVQ = BPDNVQ00 if partner_relationship_CM == 1replace natural_mother_education_NVQ = . if natural_mother_education_NVQ < 0 | natural_mother_education_NVQ == 96label variable natural_mother_education_NVQ "S2 Natural Mothers NVQ highest level at interview"* Natural mother age at CM birth: may be recorded under either main or partnerreplace BMDAGB00 = . if main_relationship_CM != 1replace BMDAGI00 = . if main_relationship_CM != 1rename BMDAGB00 mother_age_CM_birthrename BMDAGI00 mother_agereplace mother_age_CM_birth = BPDAGB00 if partner_relationship_CM == 1replace mother_age = partner_age if partner_relationship_CM == 1replace mother_age = . if mother_age <= 0label variable mother_age_CM_birth "S2 Natural Mothers age at birth of CM"label variable mother_age "S2 Natural Mothers age at wave 2"rename mother_age agemay* Good data on family income here* Language spoken in HHrename BOECDUK0 income_quintrename BMD11E00 ethnic_grouprename BDREGN00 interview_officerename BDHLAN00 languagereplace income_quint = . if income_quint < 0replace ethnic_group = . if ethnic_group < 0replace interview_office = . if interview_office < 0replace language = . if language < 0keep MCSID mother_age_CM_birth mother_BMI_wave2 mother_height_wave2 natural_mother_education_NVQ Number_CMs_in_HH country mother_age income_quint ethnic_group interview_office language*======================================================================================* Section 1c: Merge in BMI and height from wave 1*=====================================================================================sort MCSIDmerge MCSID using "${directory}Intermediate/mcs1_derived_variables.dta", unique* TODO: I might be able to reduce missing values by merging other variables from wave 1* TODO: Damian, would you rather I separate bmi and bmi_before_birth?* Compute earliest recorded BMI* egen bmi_miss = rowmiss( mother_BMI_wave1 mother_BMI_before_birth mother_BMI_wave2 )gen bmi = mother_BMI_before_birthreplace bmi = mother_BMI_wave1 if bmi == .replace bmi = mother_BMI_wave2 if bmi == .lab var bmi "Earliest recorded mother BMI. (a) Before Birth (b) At Wave 1 (c) At Wave 2"* Compute earliest recorded heightgen height = mother_height_wave1replace height = mother_height_wave2 if height == .lab var height "Earliest recorded mother height"keep MCSID mother_age_CM_birth bmi height natural_mother_education_NVQ Number_CMs_in_HH country mother_age income_quint ethnic_group interview_office languagesort MCSIDsave "${directory}Intermediate/mother_derived_variables.dta", replace*======================================================================================* Section 2: Mother DOB Year*======================================================================================use "${directory}Raw/MCS-Survey-2/stata9_se/mcs2_parent_interview.dta", clearrename bmcrel00 main_relationship_CMrename bpcrel00 partner_relationship_CMrename bmpsex00 main_sexrename bppsex00 partner_sexrename bmpdby00 main_year_birthrename bppdby00 partner_year_birth* Rewrite if main is not natural parent nor female* Note: this drops mothers who have adopted the CMreplace main_year_birth = . if main_relationship_CM != 7 | main_sex != 2rename main_year_birth year_birthlab var year_birth "S2 Natural Mother Date of Birth (year)"replace year_birth = partner_year_birth if partner_relationship_CM == 7 & partner_sex == 2* edit main_relationship_CM partner_relationship_CM main_sex partner_sex year_birth partner_year_birth if main_relationship_CM != 7 | main_sex != 2* Variables on main education are mostly N/A (14,000 out of 15,000)* bmlfte00 bmacqu00 bmvcqu00rename mcsid MCSIDkeep MCSID year_birthsort MCSIDsave "${directory}Intermediate/mcs2_parent.dta", replace*======================================================================================* Section 3: Parent interview variables*======================================================================================* birth weight of each cohort member*======================================================================================* Section 4: Mother health before preg*======================================================================================* Only found in Wave 1. Unfortunate that these variables don't exist in wave 2, because some CMs entere in wave 2use "${directory}Raw/MCS-Survey-1/stata9/mcs1_parent_interview.dta", clear* Compute weight before preg* Need to compile betweens stones/lb/kg* edit amwtbf00 amwbst00 amwblb00 amwbkg00 replace amwbst00 = . if amwbst00 <= -1replace amwblb00 = . if amwblb00 <= -1replace amwbkg00 = . if amwbkg00 <= -1* Convert stones and pounds to kggen pounds = 14*amwbst00 + amwblb00gen weight_before_preg = pounds * 0.453592replace weight_before_preg = amwbkg00 if weight_before_preg == .* Compute weekly alcohol consumption before birth* Pos. = 724	Variable = amdrof00	Variable label = S1 MAIN Frequency of alcohol consumption before preg  * Pos. = 725	Variable = ampuwk00	Variable label = S1 MAIN Number of units in average week before pregnancy  * Pos. = 726	Variable = ampuda00	Variable label = S1 MAIN Number of units in average day before pregnancy  * edit amdrof00 ampuwk00 ampuda00* Create aggregate, as some people answer number per week, others number per dayreplace ampuwk00 = . if ampuwk00 <= -1replace ampuda00 = . if ampuda00 <= -1replace ampuwk00 = 7 * ampuda00 if ampuwk00 == .rename ampuwk00 weekly_alcohol_b_pregreplace weekly_alcohol_b_preg = 0 if weekly_alcohol_b_preg == .* Create dummy variable for illness during preg* Pos. = 207	Variable = amilpr00	Variable label = S1 MAIN Any illnesses or problems during pregnancy  gen complications_during_preg = 1 if amilpr00 == 1replace complications_during_preg = 0 if complications_during_preg == .* Create variable for cig before birth* Pos. = 716	Variable = amcipr00	Variable label = S1 MAIN Number of cigarettes smoked per day before preg  replace amcipr00 = 0 if amcipr00 == -1replace amcipr00 = . if amcipr00 < 0rename amcipr00 daily_cig_before_preg* Drop male main respondents (only 28)drop if ampsex == 1label variable weight_before_preg "S1 Mothers weight before birth of CM"label variable complications_during_preg "S1 Mothers complications before preg"label variable daily_cig_before_preg "S1 Mothers Number of cigarettes smoked per day before preg"label variable weekly_alcohol_b_preg "S1 Mothers Number of units alcohol in average week before pregnancy"rename mcsid MCSIDkeep MCSID weight_before_preg weekly_alcohol_b_preg daily_cig_before_preg complications_during_pregsort MCSIDsave "${directory}Intermediate/mcs1_mother_pregnancy", replace*======================================================================================* Section 5: TODO*======================================================================================* mother health stocks + mother age first birth